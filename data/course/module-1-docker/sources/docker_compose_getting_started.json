{
  "name": "Docker Compose Getting Started",
  "url": "https://docs.docker.com/compose/gettingstarted/",
  "pages": [
    {
      "url": "https://docs.docker.com/compose/gettingstarted/",
      "title": "Docker Compose Getting Started",
      "content_html": "<article class=\"prose dark:prose-invert max-w-4xl min-w-0 flex-[2_2_0%]\"><div class=\"flex items-start justify-between\"><h1 data-pagefind-weight=\"10\">Docker Compose Quickstart</h1><div class=\"md-dropdown ml-auto hidden lg:block\"><details class=\"ml-3 group relative z-10 inline-block\" data-heap-id=\"markdown-dropdown\" id=\"markdownDropdown\"><summary class=\"dropdown-base hover:bg-gray-50 dark:hover:bg-gray-900 inline-flex cursor-pointer items-center gap-0 py-1 pl-2 text-sm font-semibold transition-colors\" data-heap-id=\"markdown-dropdown-toggle\"><span class=\"font-normal\">Page options</span>\n<span class=\"icon-svg transition-transform group-open:rotate-180\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M464-376 306-533q-2-2-3.5-4.76-1.5-2.77-1.5-5.92.0-6.32 4.13-10.82 4.12-4.5 10.87-4.5h328q6.75.0 10.88 4.64 4.12 4.63 4.12 10.81.0 1.55-5 10.55L496-376q-3 3-7.06 5t-8.94 2q-4.87.0-8.94-2-4.06-2-7.06-5z\"></path></svg>\n</span><path d=\"M19 9l-7 7-7-7\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path></summary><div class=\"dropdown-base absolute right-0 z-50 mt-1 w-65 origin-top-right p-2 text-sm shadow-md [display:none] group-open:[display:block]\" data-heap-id=\"markdown-dropdown-menu\"><button class=\"sub-button\" data-heap-id=\"copy-markdown-button\" onclick=\"copyMarkdown()\">\n<span class=\"icon-svg mt-[2px] text-base leading-none\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg>\n</span><span class=\"icon-svg hidden mt-[2px] text-base leading-none\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span><div class=\"leading-tight\"><div class=\"text-base\">Copy page as Markdown for LLMs</div></div></button>\n<button class=\"sub-button\" data-heap-id=\"view-markdown-button\" onclick=\"viewPlainText()\">\n<span class=\"icon-svg mt-[2px] text-base leading-none\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M349-250h262q12.75.0 21.38-8.68 8.62-8.67 8.62-21.5.0-12.82-8.62-21.32-8.63-8.5-21.38-8.5H349q-12.75.0-21.37 8.68-8.63 8.67-8.63 21.5.0 12.82 8.63 21.32 8.62 8.5 21.37 8.5zm0-170h262q12.75.0 21.38-8.68 8.62-8.67 8.62-21.5.0-12.82-8.62-21.32-8.63-8.5-21.38-8.5H349q-12.75.0-21.37 8.68-8.63 8.67-8.63 21.5.0 12.82 8.63 21.32 8.62 8.5 21.37 8.5zM220-80q-24 0-42-18t-18-42v-680q0-24 18-42t42-18h336q12.44.0 23.72 5T599-862l183 183q8 8 13 19.28t5 23.72v496q0 24-18 42t-42 18H220zm331-584q0 12.75 8.63 21.37Q568.25-634 581-634h159L551-820v156z\"></path></svg></span><div class=\"leading-tight\"><div class=\"text-base\">View page as plain text</div></div></button>\n<button class=\"sub-button\" data-heap-id=\"search-docs-ai-button\" onclick=\"openInDocsAI()\">\n<span class=\"icon-svg mt-[2px] text-base leading-none\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M378-329q-108.16.0-183.08-75Q120-479 120-585t75-181 181.5-75 181 75T632-584.85Q632-542 618-502t-42 75l242 240q9 8.56 9 21.78T818-143t-22.22 9-21.78-9L533-384q-30 26-69.96 40.5Q423.08-329 378-329zm-1-60q81.25.0 138.13-57.5Q572-504 572-585t-56.87-138.5Q458.25-781 377-781q-82.08.0-139.54 57.5T180-585t57.46 138.5T377-389z\"></path></svg></span><div class=\"leading-tight\"><div class=\"text-base\">Ask questions with Docs AI</div></div></button>\n<button class=\"sub-button\" data-heap-id=\"search-docs-ai-button\" onclick=\"openInClaude()\">\n<span class=\"icon-svg mt-[2px] text-base leading-none\"><svg fill=\"currentcolor\" fill-rule=\"evenodd\" height=\"1em\" style=\"flex:none;line-height:1\" viewbox=\"0 0 24 24\" width=\"1em\"><title>Claude</title><path d=\"M4.709 15.955l4.72-2.647.08-.23-.08-.128H9.2l-.79-.048-2.698-.073-2.339-.097-2.266-.122-.571-.121L0 11.784l.055-.352.48-.321.686.06 1.52.103 2.278.158 1.652.097 2.449.255h.389l.055-.157-.134-.098-.103-.097-2.358-1.596-2.552-1.688-1.336-.972-.724-.491-.364-.462-.158-1.008.656-.722.881.06.225.061.893.686 1.908 1.476 2.491 1.833.365.304.145-.103.019-.073-.164-.274-1.355-2.446-1.446-2.49-.644-1.032-.17-.619a2.97 2.97.0 01-.104-.729L6.283.134 6.696.0l.996.134.42.364.62 1.414 1.002 2.229 1.555 3.03.456.898.243.832.091.255h.158V9.01l.128-1.706.237-2.095.23-2.695.08-.76.376-.91.747-.492.584.28.48.685-.067.444-.286 1.851-.559 2.903-.364 1.942h.212l.243-.242.985-1.306 1.652-2.064.73-.82.85-.904.547-.431h1.033l.76 1.129-.34 1.166-1.064 1.347-.881 1.142-1.264 1.7-.79 1.36.073.11.188-.02 2.856-.606 1.543-.28 1.841-.315.833.388.091.395-.328.807-1.969.486-2.309.462-3.439.813-.042.03.049.061 1.549.146.662.036h1.622l3.02.225.79.522.474.638-.079.485-1.215.62-1.64-.389-3.829-.91-1.312-.329h-.182v.11l1.093 1.068 2.006 1.81 2.509 2.33.127.578-.322.455-.34-.049-2.205-1.657-.851-.747-1.926-1.62h-.128v.17l.444.649 2.345 3.521.122 1.08-.17.353-.608.213-.668-.122-1.374-1.925-1.415-2.167-1.143-1.943-.14.08-.674 7.254-.316.37-.729.28-.607-.461-.322-.747.322-1.476.389-1.924.315-1.53.286-1.9.17-.632-.012-.042-.14.018-1.434 1.967-2.18 2.945-1.726 1.845-.414.164-.717-.37.067-.662.401-.589 2.388-3.036 1.44-1.882.93-1.086-.006-.158h-.055L4.132 18.56l-1.13.146-.487-.456.061-.746.231-.243 1.908-1.312-.006.006z\"></path></svg></span><div class=\"leading-tight\"><div class=\"text-base\">Open in Claude</div></div></button></div></details></div></div><div class=\"block lg:hidden\"><div class=\"not-prose\" data-pagefind-ignore=\"\"><div class=\"pb-0 text-lg lg:pb-2\">Table of contents</div></div><hr/></div><p>This tutorial aims to introduce fundamental concepts of Docker Compose by guiding you through the development of a basic Python web application.</p><p>Using the Flask framework, the application features a hit counter in Redis, providing a practical example of how Docker Compose can be applied in web development scenarios.</p><p>The concepts demonstrated here should be understandable even if you're not familiar with Python.</p><p>This is a non-normative example that demonstrates core Compose functionality.</p><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"prerequisites\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#prerequisites\" target=\"_blank\">Prerequisites</a></h2><p>Make sure you have:</p><ul><li><a class=\"link\" href=\"https://docs.docker.com/compose/install/\" target=\"_blank\">Installed the latest version of Docker Compose</a></li><li>A basic understanding of Docker concepts and how Docker works</li></ul><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-1-set-up\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-1-set-up\" target=\"_blank\">Step 1: Set up</a></h2><ol><li><p>Create a directory for the project:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBta2RpciBjb21wb3NldGVzdAokIGNkIGNvbXBvc2V0ZXN0', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> mkdir composetest\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> <span class=\"nb\">cd</span> composetest\n</span></span></code></pre></div></div></div></div></li><li><p>Create a file called <code>app.py</code> in your project directory and paste the following code in:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'aW1wb3J0IHRpbWUKCmltcG9ydCByZWRpcwpmcm9tIGZsYXNrIGltcG9ydCBGbGFzawoKYXBwID0gRmxhc2soX19uYW1lX18pCmNhY2hlID0gcmVkaXMuUmVkaXMoaG9zdD0ncmVkaXMnLCBwb3J0PTYzNzkpCgpkZWYgZ2V0X2hpdF9jb3VudCgpOgogICAgcmV0cmllcyA9IDUKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gY2FjaGUuaW5jcignaGl0cycpCiAgICAgICAgZXhjZXB0IHJlZGlzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yIGFzIGV4YzoKICAgICAgICAgICAgaWYgcmV0cmllcyA9PSAwOgogICAgICAgICAgICAgICAgcmFpc2UgZXhjCiAgICAgICAgICAgIHJldHJpZXMgLT0gMQogICAgICAgICAgICB0aW1lLnNsZWVwKDAuNSkKCkBhcHAucm91dGUoJy8nKQpkZWYgaGVsbG8oKToKICAgIGNvdW50ID0gZ2V0X2hpdF9jb3VudCgpCiAgICByZXR1cm4gZidIZWxsbyBXb3JsZCEgSSBoYXZlIGJlZW4gc2VlbiB7Y291bnR9IHRpbWVzLlxuJw==', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-python\" data-lang=\"python\"><span class=\"line\"><span class=\"cl\"><span class=\"kn\">import</span> <span class=\"nn\">time</span>\n</span></span><span class=\"line\"><span class=\"cl\">\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"kn\">import</span> <span class=\"nn\">redis</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"kn\">from</span> <span class=\"nn\">flask</span> <span class=\"kn\">import</span> <span class=\"n\">Flask</span>\n</span></span><span class=\"line\"><span class=\"cl\">\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"n\">app</span> <span class=\"o\">=</span> <span class=\"n\">Flask</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"n\">cache</span> <span class=\"o\">=</span> <span class=\"n\">redis</span><span class=\"o\">.</span><span class=\"n\">Redis</span><span class=\"p\">(</span><span class=\"n\">host</span><span class=\"o\">=</span><span class=\"s1\">'redis'</span><span class=\"p\">,</span> <span class=\"n\">port</span><span class=\"o\">=</span><span class=\"mi\">6379</span><span class=\"p\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"k\">def</span> <span class=\"nf\">get_hit_count</span><span class=\"p\">():</span>\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"n\">retries</span> <span class=\"o\">=</span> <span class=\"mi\">5</span>\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n</span></span><span class=\"line\"><span class=\"cl\">        <span class=\"k\">try</span><span class=\"p\">:</span>\n</span></span><span class=\"line\"><span class=\"cl\">            <span class=\"k\">return</span> <span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">incr</span><span class=\"p\">(</span><span class=\"s1\">'hits'</span><span class=\"p\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">        <span class=\"k\">except</span> <span class=\"n\">redis</span><span class=\"o\">.</span><span class=\"n\">exceptions</span><span class=\"o\">.</span><span class=\"n\">ConnectionError</span> <span class=\"k\">as</span> <span class=\"n\">exc</span><span class=\"p\">:</span>\n</span></span><span class=\"line\"><span class=\"cl\">            <span class=\"k\">if</span> <span class=\"n\">retries</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n</span></span><span class=\"line\"><span class=\"cl\">                <span class=\"k\">raise</span> <span class=\"n\">exc</span>\n</span></span><span class=\"line\"><span class=\"cl\">            <span class=\"n\">retries</span> <span class=\"o\">-=</span> <span class=\"mi\">1</span>\n</span></span><span class=\"line\"><span class=\"cl\">            <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">sleep</span><span class=\"p\">(</span><span class=\"mf\">0.5</span><span class=\"p\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\">\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"nd\">@app.route</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">)</span>\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"k\">def</span> <span class=\"nf\">hello</span><span class=\"p\">():</span>\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"n\">count</span> <span class=\"o\">=</span> <span class=\"n\">get_hit_count</span><span class=\"p\">()</span>\n</span></span><span class=\"line\"><span class=\"cl\">    <span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s1\">'Hello World! I have been seen </span><span class=\"si\">{</span><span class=\"n\">count</span><span class=\"si\">}</span><span class=\"s1\"> times.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span></span></span></code></pre></div></div></div></div><p>In this example, <code>redis</code> is the hostname of the redis container on the\napplication's network and the default port, <code>6379</code> is used.</p><blockquote class=\"admonition admonition-note admonition not-prose\"><div class=\"admonition-header\"><span class=\"admonition-icon\"><svg fill=\"none\" height=\"24\" viewbox=\"0 0 24 24\" width=\"24\"><path d=\"M12 16V12m0-4H12.01M22 12c0 5.5228-4.4772 10-10 10C6.47715 22 2 17.5228 2 12 2 6.47715 6.47715 2 12 2c5.5228.0 10 4.47715 10 10z\" stroke=\"currentcolor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path></svg>\n</span><span class=\"admonition-title\">Note</span></div><div class=\"admonition-content\"><p>Note the way the <code>get_hit_count</code> function is written. This basic retry\nloop attempts the request multiple times if the Redis service is\nnot available. This is useful at startup while the application comes\nonline, but also makes the application more resilient if the Redis\nservice needs to be restarted anytime during the app's lifetime. In a\ncluster, this also helps handling momentary connection drops between\nnodes.</p></div></blockquote></li><li><p>Create another file called <code>requirements.txt</code> in your project directory and\npaste the following code in:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'Zmxhc2sKcmVkaXM=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-text\" data-lang=\"text\"><span class=\"line\"><span class=\"cl\">flask\n</span></span><span class=\"line\"><span class=\"cl\">redis</span></span></code></pre></div></div></div></div></li><li><p>Create a <code>Dockerfile</code> and paste the following code in:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'IyBzeW50YXg9ZG9ja2VyL2RvY2tlcmZpbGU6MQpGUk9NIHB5dGhvbjozLjEwLWFscGluZQpXT1JLRElSIC9jb2RlCkVOViBGTEFTS19BUFA9YXBwLnB5CkVOViBGTEFTS19SVU5fSE9TVD0wLjAuMC4wClJVTiBhcGsgYWRkIC0tbm8tY2FjaGUgZ2NjIG11c2wtZGV2IGxpbnV4LWhlYWRlcnMKQ09QWSByZXF1aXJlbWVudHMudHh0IHJlcXVpcmVtZW50cy50eHQKUlVOIHBpcCBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHQKRVhQT1NFIDUwMDAKQ09QWSAuIC4KQ01EIFsiZmxhc2siLCAicnVuIiwgIi0tZGVidWciXQ==', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-dockerfile\" data-lang=\"dockerfile\"><span class=\"line\"><span class=\"cl\"><span class=\"c\"># syntax=docker/dockerfile:1</span><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">FROM</span><span class=\"s\"> python:3.10-alpine</span><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">WORKDIR</span><span class=\"s\"> /code</span><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">ENV</span> <span class=\"nv\">FLASK_APP</span><span class=\"o\">=</span>app.py<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">ENV</span> <span class=\"nv\">FLASK_RUN_HOST</span><span class=\"o\">=</span><span class=\"m\">0</span>.0.0.0<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">RUN</span> apk add --no-cache gcc musl-dev linux-headers<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">COPY</span> requirements.txt requirements.txt<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">RUN</span> pip install -r requirements.txt<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">EXPOSE</span><span class=\"s\"> 5000</span><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">COPY</span> . .<span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"k\">CMD</span> <span class=\"p\">[</span><span class=\"s2\">\"flask\"</span><span class=\"p\">,</span> <span class=\"s2\">\"run\"</span><span class=\"p\">,</span> <span class=\"s2\">\"--debug\"</span><span class=\"p\">]</span></span></span></code></pre></div></div></div></div><div class=\"my-6 rounded-sm border border-gray-200 bg-white py-2 dark:border-gray-700 dark:bg-gray-900\" id=\"understand-the-dockerfile\" x-data=\"{ open: false }\"><button class=\"not-prose flex w-full justify-between px-4 py-2\" x-on:click=\"open = ! open\"><div class=\"flex items-center gap-2\">Understand the Dockerfile</div><span :class=\"{ 'hidden' : !open }\" class=\"icon-svg\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M316-4e2q-6.75.0-10.87-4.64-4.13-4.63-4.13-10.81.0-1.55 5-10.55l158-157q3-3 7.06-5 4.07-2 8.94-2 4.88.0 8.94 2t7.06 5l158 157q2 2 3.5 4.76 1.5 2.77 1.5 5.92.0 6.32-4.12 10.82-4.13 4.5-10.88 4.5H316z\"></path></svg></span>\n<span :class=\"{ 'hidden' : open }\" class=\"icon-svg\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M464-376 306-533q-2-2-3.5-4.76-1.5-2.77-1.5-5.92.0-6.32 4.13-10.82 4.12-4.5 10.87-4.5h328q6.75.0 10.88 4.64 4.12 4.63 4.12 10.81.0 1.55-5 10.55L496-376q-3 3-7.06 5t-8.94 2q-4.87.0-8.94-2-4.06-2-7.06-5z\"></path></svg></span></button><div class=\"px-4\" x-collapse=\"\" x-show=\"open\"><p>This tells Docker to:</p><ul><li>Build an image starting with the Python 3.10 image.</li><li>Set the working directory to <code>/code</code>.</li><li>Set environment variables used by the <code>flask</code> command.</li><li>Install gcc and other dependencies</li><li>Copy <code>requirements.txt</code> and install the Python dependencies.</li><li>Add metadata to the image to describe that the container is listening on port 5000</li><li>Copy the current directory <code>.</code> in the project to the workdir <code>.</code> in the image.</li><li>Set the default command for the container to <code>flask run --debug</code>.</li></ul></div></div><blockquote class=\"admonition admonition-note admonition not-prose\"><div class=\"admonition-header\"><span class=\"admonition-icon\"><svg fill=\"none\" height=\"24\" viewbox=\"0 0 24 24\" width=\"24\"><path d=\"M12 8v4m0 4H12.01M7.8 21h8.4C17.8802 21 18.7202 21 19.362 20.673 19.9265 20.3854 20.3854 19.9265 20.673 19.362 21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803 20.3854 4.07354 19.9265 3.6146 19.362 3.32698 18.7202 3 17.8802 3 16.2 3H7.8c-1.68016.0-2.52024.0-3.16197.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803 3 5.27976 3 6.11984 3 7.8v8.4c0 1.6802.0 2.5202.32698 3.162C3.6146 19.9265 4.07354 20.3854 4.63803 20.673 5.27976 21 6.11984 21 7.8 21z\" stroke=\"currentcolor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path></svg>\n</span><span class=\"admonition-title\">Important</span></div><div class=\"admonition-content\"><p>Check that the <code>Dockerfile</code> has no file extension like <code>.txt</code>. Some editors may append this file extension automatically which results in an error when you run the application.</p></div></blockquote><p>For more information on how to write Dockerfiles, see the\n<a class=\"link\" href=\"https://docs.docker.com/reference/dockerfile/\" target=\"_blank\">Dockerfile reference</a>.</p></li></ol><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-2-define-services-in-a-compose-file\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-2-define-services-in-a-compose-file\" target=\"_blank\">Step 2: Define services in a Compose file</a></h2><p>Compose simplifies the control of your entire application stack, making it easy to manage services, networks, and volumes in a single, comprehensible YAML configuration file.</p><p>Create a file called <code>compose.yaml</code> in your project directory and paste\nthe following:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'c2VydmljZXM6CiAgd2ViOgogICAgYnVpbGQ6IC4KICAgIHBvcnRzOgogICAgICAtICI4MDAwOjUwMDAiCiAgcmVkaXM6CiAgICBpbWFnZTogInJlZGlzOmFscGluZSI=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-yaml\" data-lang=\"yaml\"><span class=\"line\"><span class=\"cl\"><span class=\"nt\">services</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">web</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">build</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">.</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">ports</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">      </span>- <span class=\"s2\">\"8000:5000\"</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">redis</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">image</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"redis:alpine\"</span></span></span></code></pre></div></div></div></div><p>This Compose file defines two services: <code>web</code> and <code>redis</code>.</p><p>The <code>web</code> service uses an image that's built from the <code>Dockerfile</code> in the current directory.\nIt then binds the container and the host machine to the exposed port, <code>8000</code>. This example service uses the default port for the Flask web server, <code>5000</code>.</p><p>The <code>redis</code> service uses a public <a class=\"link\" href=\"https://registry.hub.docker.com/_/redis/\" rel=\"noopener\" target=\"_blank\">Redis</a>\nimage pulled from the Docker Hub registry.</p><p>For more information on the <code>compose.yaml</code> file, see <a class=\"link\" href=\"https://docs.docker.com/compose/intro/compose-application-model/\" target=\"_blank\">How Compose works</a>.</p><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-3-build-and-run-your-app-with-compose\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-3-build-and-run-your-app-with-compose\" target=\"_blank\">Step 3: Build and run your app with Compose</a></h2><p>With a single command, you create and start all the services from your configuration file.</p><ol><li><p>From your project directory, start up your application by running <code>docker compose up</code>.</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBkb2NrZXIgY29tcG9zZSB1cAoKQ3JlYXRpbmcgbmV0d29yayAiY29tcG9zZXRlc3RfZGVmYXVsdCIgd2l0aCB0aGUgZGVmYXVsdCBkcml2ZXIKQ3JlYXRpbmcgY29tcG9zZXRlc3Rfd2ViXzEgLi4uCkNyZWF0aW5nIGNvbXBvc2V0ZXN0X3JlZGlzXzEgLi4uCkNyZWF0aW5nIGNvbXBvc2V0ZXN0X3dlYl8xCkNyZWF0aW5nIGNvbXBvc2V0ZXN0X3JlZGlzXzEgLi4uIGRvbmUKQXR0YWNoaW5nIHRvIGNvbXBvc2V0ZXN0X3dlYl8xLCBjb21wb3NldGVzdF9yZWRpc18xCndlYl8xICAgIHwgICogUnVubmluZyBvbiBodHRwOi8vMC4wLjAuMDo1MDAwLyAoUHJlc3MgQ1RSTCtDIHRvIHF1aXQpCnJlZGlzXzEgIHwgMTpDIDE3IEF1ZyAyMjoxMToxMC40ODAgIyBvTzBPb08wT29PME9vIFJlZGlzIGlzIHN0YXJ0aW5nIG9PME9vTzBPb08wT28KcmVkaXNfMSAgfCAxOkMgMTcgQXVnIDIyOjExOjEwLjQ4MCAjIFJlZGlzIHZlcnNpb249NC4wLjEsIGJpdHM9NjQsIGNvbW1pdD0wMDAwMDAwMCwgbW9kaWZpZWQ9MCwgcGlkPTEsIGp1c3Qgc3RhcnRlZApyZWRpc18xICB8IDE6QyAxNyBBdWcgMjI6MTE6MTAuNDgwICMgV2FybmluZzogbm8gY29uZmlnIGZpbGUgc3BlY2lmaWVkLCB1c2luZyB0aGUgZGVmYXVsdCBjb25maWcuIEluIG9yZGVyIHRvIHNwZWNpZnkgYSBjb25maWcgZmlsZSB1c2UgcmVkaXMtc2VydmVyIC9wYXRoL3RvL3JlZGlzLmNvbmYKd2ViXzEgICAgfCAgKiBSZXN0YXJ0aW5nIHdpdGggc3RhdApyZWRpc18xICB8IDE6TSAxNyBBdWcgMjI6MTE6MTAuNDgzICogUnVubmluZyBtb2RlPXN0YW5kYWxvbmUsIHBvcnQ9NjM3OS4KcmVkaXNfMSAgfCAxOk0gMTcgQXVnIDIyOjExOjEwLjQ4MyAjIFdBUk5JTkc6IFRoZSBUQ1AgYmFja2xvZyBzZXR0aW5nIG9mIDUxMSBjYW5ub3QgYmUgZW5mb3JjZWQgYmVjYXVzZSAvcHJvYy9zeXMvbmV0L2NvcmUvc29tYXhjb25uIGlzIHNldCB0byB0aGUgbG93ZXIgdmFsdWUgb2YgMTI4Lgp3ZWJfMSAgICB8ICAqIERlYnVnZ2VyIGlzIGFjdGl2ZSEKcmVkaXNfMSAgfCAxOk0gMTcgQXVnIDIyOjExOjEwLjQ4MyAjIFNlcnZlciBpbml0aWFsaXplZApyZWRpc18xICB8IDE6TSAxNyBBdWcgMjI6MTE6MTAuNDgzICMgV0FSTklORyB5b3UgaGF2ZSBUcmFuc3BhcmVudCBIdWdlIFBhZ2VzIChUSFApIHN1cHBvcnQgZW5hYmxlZCBpbiB5b3VyIGtlcm5lbC4gVGhpcyB3aWxsIGNyZWF0ZSBsYXRlbmN5IGFuZCBtZW1vcnkgdXNhZ2UgaXNzdWVzIHdpdGggUmVkaXMuIFRvIGZpeCB0aGlzIGlzc3VlIHJ1biB0aGUgY29tbWFuZCAnZWNobyBuZXZlciA+IC9zeXMva2VybmVsL21tL3RyYW5zcGFyZW50X2h1Z2VwYWdlL2VuYWJsZWQnIGFzIHJvb3QsIGFuZCBhZGQgaXQgdG8geW91ciAvZXRjL3JjLmxvY2FsIGluIG9yZGVyIHRvIHJldGFpbiB0aGUgc2V0dGluZyBhZnRlciBhIHJlYm9vdC4gUmVkaXMgbXVzdCBiZSByZXN0YXJ0ZWQgYWZ0ZXIgVEhQIGlzIGRpc2FibGVkLgp3ZWJfMSAgICB8ICAqIERlYnVnZ2VyIFBJTjogMzMwLTc4Ny05MDMKcmVkaXNfMSAgfCAxOk0gMTcgQXVnIDIyOjExOjEwLjQ4MyAqIFJlYWR5IHRvIGFjY2VwdCBjb25uZWN0aW9ucw==', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> docker compose up\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"go\">Creating network \"composetest_default\" with the default driver\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Creating composetest_web_1 ...\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Creating composetest_redis_1 ...\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Creating composetest_web_1\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Creating composetest_redis_1 ... done\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Attaching to composetest_web_1, composetest_redis_1\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">web_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:C 17 Aug 22:11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:C 17 Aug 22:11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:C 17 Aug 22:11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">web_1    |  * Restarting with stat\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:M 17 Aug 22:11:10.483 * Running mode=standalone, port=6379.\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:M 17 Aug 22:11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">web_1    |  * Debugger is active!\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:M 17 Aug 22:11:10.483 # Server initialized\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:M 17 Aug 22:11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">web_1    |  * Debugger PIN: 330-787-903\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis_1  | 1:M 17 Aug 22:11:10.483 * Ready to accept connections\n</span></span></span></code></pre></div></div></div></div><p>Compose pulls a Redis image, builds an image for your code, and starts the\nservices you defined. In this case, the code is statically copied into the image at build time.</p></li><li><p>Enter <code>http://localhost:8000/</code> in a browser to see the application running.</p><p>If this doesn't resolve, you can also try <code>http://127.0.0.1:8000</code>.</p><p>You should see a message in your browser saying:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'SGVsbG8gV29ybGQhIEkgaGF2ZSBiZWVuIHNlZW4gMSB0aW1lcy4=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-text\" data-lang=\"text\"><span class=\"line\"><span class=\"cl\">Hello World! I have been seen 1 times.</span></span></code></pre></div></div></div></div><figure @click=\"zoom = ! zoom\" class=\"cursor-pointer hover:opacity-90\" x-data=\"{ zoom: false }\"><img alt=\"hello world in browser\" class=\"mx-auto rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-1.png\"/>\n<template x-teleport=\"body\"><div @click=\"zoom = false\" class=\"fixed inset-0 z-20 flex items-center justify-center bg-black/100 p-6\" x-show=\"zoom\" x-transition.opacity.duration.250ms=\"\"><button class=\"icon-svg fixed top-6 right-8 z-30 text-white\">\n<svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M480-438 270-228q-9 9-21 9t-21-9-9-21 9-21l210-210-210-210q-9-9-9-21t9-21 21-9 21 9l210 210 210-210q9-9 21-9t21 9 9 21-9 21L522-480l210 210q9 9 9 21t-9 21-21 9-21-9L480-438z\"></path></svg>\n</button>\n<img alt=\"hello world in browser\" class=\"max-h-full max-w-full rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-1.png\"/></div></template></figure></li><li><p>Refresh the page.</p><p>The number should increment.</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'SGVsbG8gV29ybGQhIEkgaGF2ZSBiZWVuIHNlZW4gMiB0aW1lcy4=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-text\" data-lang=\"text\"><span class=\"line\"><span class=\"cl\">Hello World! I have been seen 2 times.</span></span></code></pre></div></div></div></div><figure @click=\"zoom = ! zoom\" class=\"cursor-pointer hover:opacity-90\" x-data=\"{ zoom: false }\"><img alt=\"hello world in browser\" class=\"mx-auto rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-2.png\"/>\n<template x-teleport=\"body\"><div @click=\"zoom = false\" class=\"fixed inset-0 z-20 flex items-center justify-center bg-black/100 p-6\" x-show=\"zoom\" x-transition.opacity.duration.250ms=\"\"><button class=\"icon-svg fixed top-6 right-8 z-30 text-white\">\n<svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M480-438 270-228q-9 9-21 9t-21-9-9-21 9-21l210-210-210-210q-9-9-9-21t9-21 21-9 21 9l210 210 210-210q9-9 21-9t21 9 9 21-9 21L522-480l210 210q9 9 9 21t-9 21-21 9-21-9L480-438z\"></path></svg>\n</button>\n<img alt=\"hello world in browser\" class=\"max-h-full max-w-full rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-2.png\"/></div></template></figure></li><li><p>Switch to another terminal window, and type <code>docker image ls</code> to list local images.</p><p>Listing images at this point should return <code>redis</code> and <code>web</code>.</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBkb2NrZXIgaW1hZ2UgbHMKClJFUE9TSVRPUlkgICAgICAgIFRBRyAgICAgICAgICAgSU1BR0UgSUQgICAgICBDUkVBVEVEICAgICAgICBTSVpFCmNvbXBvc2V0ZXN0X3dlYiAgIGxhdGVzdCAgICAgICAgZTJjMjFhYTQ4Y2MxICA0IG1pbnV0ZXMgYWdvICA5My44TUIKcHl0aG9uICAgICAgICAgICAgMy40LWFscGluZSAgICA4NGU2MDc3YzdhYjYgIDcgZGF5cyBhZ28gICAgIDgyLjVNQgpyZWRpcyAgICAgICAgICAgICBhbHBpbmUgICAgICAgIDlkOGZhOWFhMGU1YiAgMyB3ZWVrcyBhZ28gICAgMjcuNU1C', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> docker image ls\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"go\">REPOSITORY        TAG           IMAGE ID      CREATED        SIZE\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">composetest_web   latest        e2c21aa48cc1  4 minutes ago  93.8MB\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">python            3.4-alpine    84e6077c7ab6  7 days ago     82.5MB\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">redis             alpine        9d8fa9aa0e5b  3 weeks ago    27.5MB\n</span></span></span></code></pre></div></div></div></div><p>You can inspect images with <code>docker inspect &lt;tag or id&gt;</code>.</p></li><li><p>Stop the application, either by running <code>docker compose down</code>\nfrom within your project directory in the second terminal, or by\nhitting <code>CTRL+C</code> in the original terminal where you started the app.</p></li></ol><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-4-edit-the-compose-file-to-use-compose-watch\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-4-edit-the-compose-file-to-use-compose-watch\" target=\"_blank\">Step 4: Edit the Compose file to use Compose Watch</a></h2><p>Edit the <code>compose.yaml</code> file in your project directory to use <code>watch</code> so you can preview your running Compose services which are automatically updated as you edit and save your code:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'c2VydmljZXM6CiAgd2ViOgogICAgYnVpbGQ6IC4KICAgIHBvcnRzOgogICAgICAtICI4MDAwOjUwMDAiCiAgICBkZXZlbG9wOgogICAgICB3YXRjaDoKICAgICAgICAtIGFjdGlvbjogc3luYwogICAgICAgICAgcGF0aDogLgogICAgICAgICAgdGFyZ2V0OiAvY29kZQogIHJlZGlzOgogICAgaW1hZ2U6ICJyZWRpczphbHBpbmUi', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-yaml\" data-lang=\"yaml\"><span class=\"line\"><span class=\"cl\"><span class=\"nt\">services</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">web</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">build</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">.</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">ports</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">      </span>- <span class=\"s2\">\"8000:5000\"</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">develop</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">      </span><span class=\"nt\">watch</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">        </span>- <span class=\"nt\">action</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">sync</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">          </span><span class=\"nt\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">.</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">          </span><span class=\"nt\">target</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">/code</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">redis</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">image</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"redis:alpine\"</span></span></span></code></pre></div></div></div></div><p>Whenever a file is changed, Compose syncs the file to the corresponding location under <code>/code</code> inside the container. Once copied, the bundler updates the running application without a restart.</p><p>For more information on how Compose Watch works, see\n<a class=\"link\" href=\"https://docs.docker.com/compose/how-tos/file-watch/\" target=\"_blank\">Use Compose Watch</a>. Alternatively, see\n<a class=\"link\" href=\"https://docs.docker.com/engine/storage/volumes/\" target=\"_blank\">Manage data in containers</a> for other options.</p><blockquote class=\"admonition admonition-note admonition not-prose\"><div class=\"admonition-header\"><span class=\"admonition-icon\"><svg fill=\"none\" height=\"24\" viewbox=\"0 0 24 24\" width=\"24\"><path d=\"M12 16V12m0-4H12.01M22 12c0 5.5228-4.4772 10-10 10C6.47715 22 2 17.5228 2 12 2 6.47715 6.47715 2 12 2c5.5228.0 10 4.47715 10 10z\" stroke=\"currentcolor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"></path></svg>\n</span><span class=\"admonition-title\">Note</span></div><div class=\"admonition-content\"><p>For this example to work, the <code>--debug</code> option is added to the <code>Dockerfile</code>. The <code>--debug</code> option in Flask enables automatic code reload, making it possible to work on the backend API without the need to restart or rebuild the container.\nAfter changing the <code>.py</code> file, subsequent API calls will use the new code, but the browser UI will not automatically refresh in this small example. Most frontend development servers include native live reload support that works with Compose.</p></div></blockquote><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-5-re-build-and-run-the-app-with-compose\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-5-re-build-and-run-the-app-with-compose\" target=\"_blank\">Step 5: Re-build and run the app with Compose</a></h2><p>From your project directory, type <code>docker compose watch</code> or <code>docker compose up --watch</code> to build and launch the app and start the file watch mode.</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBkb2NrZXIgY29tcG9zZSB3YXRjaApbK10gUnVubmluZyAyLzIKIOKclCBDb250YWluZXIgZG9jcy1yZWRpcy0xIENyZWF0ZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMHMKIOKclCBDb250YWluZXIgZG9jcy13ZWItMSAgICBSZWNyZWF0ZWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjFzCkF0dGFjaGluZyB0byByZWRpcy0xLCB3ZWItMQogICAgICAgICDipr8gd2F0Y2ggZW5hYmxlZAouLi4=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> docker compose watch\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">[+] Running 2/2\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">  Container docs-redis-1 Created                                                                                                                                                                                                        0.0s\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">  Container docs-web-1    Recreated                                                                                                                                                                                                      0.1s\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Attaching to redis-1, web-1\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">          watch enabled\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">...\n</span></span></span></code></pre></div></div></div></div><p>Check the <code>Hello World</code> message in a web browser again, and refresh to see the\ncount increment.</p><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-6-update-the-application\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-6-update-the-application\" target=\"_blank\">Step 6: Update the application</a></h2><p>To see Compose Watch in action:</p><ol><li><p>Change the greeting in <code>app.py</code> and save it. For example, change the <code>Hello World!</code>\nmessage to <code>Hello from Docker!</code>:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'cmV0dXJuIGYnSGVsbG8gZnJvbSBEb2NrZXIhIEkgaGF2ZSBiZWVuIHNlZW4ge2NvdW50fSB0aW1lcy5cbic=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-python\" data-lang=\"python\"><span class=\"line\"><span class=\"cl\"><span class=\"k\">return</span> <span class=\"sa\">f</span><span class=\"s1\">'Hello from Docker! I have been seen </span><span class=\"si\">{</span><span class=\"n\">count</span><span class=\"si\">}</span><span class=\"s1\"> times.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span></span></span></code></pre></div></div></div></div></li><li><p>Refresh the app in your browser. The greeting should be updated, and the\ncounter should still be incrementing.</p><figure @click=\"zoom = ! zoom\" class=\"cursor-pointer hover:opacity-90\" x-data=\"{ zoom: false }\"><img alt=\"hello world in browser\" class=\"mx-auto rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-3.png\"/>\n<template x-teleport=\"body\"><div @click=\"zoom = false\" class=\"fixed inset-0 z-20 flex items-center justify-center bg-black/100 p-6\" x-show=\"zoom\" x-transition.opacity.duration.250ms=\"\"><button class=\"icon-svg fixed top-6 right-8 z-30 text-white\">\n<svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M480-438 270-228q-9 9-21 9t-21-9-9-21 9-21l210-210-210-210q-9-9-9-21t9-21 21-9 21 9l210 210 210-210q9-9 21-9t21 9 9 21-9 21L522-480l210 210q9 9 9 21t-9 21-21 9-21-9L480-438z\"></path></svg>\n</button>\n<img alt=\"hello world in browser\" class=\"max-h-full max-w-full rounded-sm\" loading=\"lazy\" src=\"https://docs.docker.com/compose/images/quick-hello-world-3.png\"/></div></template></figure></li><li><p>Once you're done, run <code>docker compose down</code>.</p></li></ol><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-7-split-up-your-services\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-7-split-up-your-services\" target=\"_blank\">Step 7: Split up your services</a></h2><p>Using multiple Compose files lets you customize a Compose application for different environments or workflows. This is useful for large applications that may use dozens of containers, with ownership distributed across multiple teams.</p><ol><li><p>In your project folder, create a new Compose file called <code>infra.yaml</code>.</p></li><li><p>Cut the Redis service from your <code>compose.yaml</code> file and paste it into your new <code>infra.yaml</code> file. Make sure you add the <code>services</code> top-level attribute at the top of your file. Your <code>infra.yaml</code> file should now look like this:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'c2VydmljZXM6CiAgcmVkaXM6CiAgICBpbWFnZTogInJlZGlzOmFscGluZSI=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-yaml\" data-lang=\"yaml\"><span class=\"line\"><span class=\"cl\"><span class=\"nt\">services</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">redis</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">image</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"redis:alpine\"</span></span></span></code></pre></div></div></div></div></li><li><p>In your <code>compose.yaml</code> file, add the <code>include</code> top-level attribute along with the path to the <code>infra.yaml</code> file.</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'aW5jbHVkZToKICAgLSBpbmZyYS55YW1sCnNlcnZpY2VzOgogIHdlYjoKICAgIGJ1aWxkOiAuCiAgICBwb3J0czoKICAgICAgLSAiODAwMDo1MDAwIgogICAgZGV2ZWxvcDoKICAgICAgd2F0Y2g6CiAgICAgICAgLSBhY3Rpb246IHN5bmMKICAgICAgICAgIHBhdGg6IC4KICAgICAgICAgIHRhcmdldDogL2NvZGU=', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-yaml\" data-lang=\"yaml\"><span class=\"line\"><span class=\"cl\"><span class=\"nt\">include</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">   </span>- <span class=\"l\">infra.yaml</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\"></span><span class=\"nt\">services</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">  </span><span class=\"nt\">web</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">build</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">.</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">ports</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">      </span>- <span class=\"s2\">\"8000:5000\"</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">    </span><span class=\"nt\">develop</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">      </span><span class=\"nt\">watch</span><span class=\"p\">:</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">        </span>- <span class=\"nt\">action</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">sync</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">          </span><span class=\"nt\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">.</span><span class=\"w\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"w\">          </span><span class=\"nt\">target</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">/code</span></span></span></code></pre></div></div></div></div></li><li><p>Run <code>docker compose up</code> to build the app with the updated Compose files, and run it. You should see the <code>Hello world</code> message in your browser.</p></li></ol><p>This is a simplified example, but it demonstrates the basic principle of <code>include</code> and how it can make it easier to modularize complex applications into sub-Compose files. For more information on <code>include</code> and working with multiple Compose files, see\n<a class=\"link\" href=\"https://docs.docker.com/compose/how-tos/multiple-compose-files/\" target=\"_blank\">Working with multiple Compose files</a>.</p><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"step-8-experiment-with-some-other-commands\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#step-8-experiment-with-some-other-commands\" target=\"_blank\">Step 8: Experiment with some other commands</a></h2><ul><li><p>If you want to run your services in the background, you can pass the <code>-d</code> flag (for \"detached\" mode) to <code>docker compose up</code> and use <code>docker compose ps</code> to see what is currently running:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBkb2NrZXIgY29tcG9zZSB1cCAtZAoKU3RhcnRpbmcgY29tcG9zZXRlc3RfcmVkaXNfMS4uLgpTdGFydGluZyBjb21wb3NldGVzdF93ZWJfMS4uLgoKJCBkb2NrZXIgY29tcG9zZSBwcwoKICAgICAgIE5hbWUgICAgICAgICAgICAgICAgICAgICAgQ29tbWFuZCAgICAgICAgICAgICAgIFN0YXRlICAgICAgICAgICBQb3J0cyAgICAgICAgIAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbXBvc2V0ZXN0X3JlZGlzXzEgICBkb2NrZXItZW50cnlwb2ludC5zaCByZWRpcyAuLi4gICBVcCAgICAgIDYzNzkvdGNwICAgICAgICAgICAgICAKY29tcG9zZXRlc3Rfd2ViXzEgICAgIGZsYXNrIHJ1biAgICAgICAgICAgICAgICAgICAgICAgIFVwICAgICAgMC4wLjAuMDo4MDAwLT41MDAwL3RjcA==', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> docker compose up -d\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"go\">Starting composetest_redis_1...\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">Starting composetest_web_1...\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\"></span><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"gp\">$</span> docker compose ps\n</span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\">\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"err\"></span><span class=\"go\">       Name                      Command               State           Ports         \n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">-------------------------------------------------------------------------------------\n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">composetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp              \n</span></span></span><span class=\"line\"><span class=\"cl\"><span class=\"go\">composetest_web_1     flask run                        Up      0.0.0.0:8000-&gt;5000/tcp\n</span></span></span></code></pre></div></div></div></div></li><li><p>Run <code>docker compose --help</code> to see other available commands.</p></li><li><p>If you started Compose with <code>docker compose up -d</code>, stop your services once you've finished with them:</p><div class=\"group mt-2 mb-4 flex w-full scroll-mt-2 flex-col items-start gap-4 rounded bg-gray-50 p-2 outline outline-1 outline-offset-[-1px] outline-gray-200 dark:bg-gray-900 dark:outline-gray-800\" data-pagefind-ignore=\"\" x-data=\"\" x-ref=\"root\"><div class=\"relative w-full\"><div class=\"syntax-light dark:syntax-dark not-prose w-full\"><button @click=\"window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\\$&gt;]\\s+/gm, ''));\n      copying = true;\n      setTimeout(() =&gt; copying = false, 2000);\" class=\"top-1 absolute right-2 z-10 text-gray-300 dark:text-gray-500\" title=\"copy\" x-data=\"{ code: 'JCBkb2NrZXIgY29tcG9zZSBzdG9w', copying: false }\">\n<span :class=\"{ 'group-hover:block' : !copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z\"></path></svg></span>\n<span :class=\"{ 'group-hover:block' : copying }\" class=\"icon-svg hidden\"><svg height=\"48\" viewbox=\"0 -960 960 960\" width=\"48\"><path d=\"m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z\"></path></svg></span></button><div class=\"highlight\"><pre class=\"chroma\" tabindex=\"0\"><code class=\"language-console\" data-lang=\"console\"><span class=\"line\"><span class=\"cl\"><span class=\"gp\">$</span> docker compose stop\n</span></span></code></pre></div></div></div></div></li><li><p>You can bring everything down, removing the containers entirely, with the <code>docker compose down</code> command.</p></li></ul><h2 class=\"scroll-mt-20 flex items-center gap-2\" id=\"where-to-go-next\"><a class=\"text-black dark:text-white no-underline hover:underline\" href=\"https://docs.docker.com/compose/gettingstarted/#where-to-go-next\" target=\"_blank\">Where to go next</a></h2><ul><li>Try the <a class=\"link\" href=\"https://github.com/docker/awesome-compose\" rel=\"noopener\" target=\"_blank\">Sample apps with Compose</a></li><li><a class=\"link\" href=\"https://docs.docker.com/reference/cli/docker/compose/\" target=\"_blank\">Explore the full list of Compose commands</a></li><li><a class=\"link\" href=\"https://docs.docker.com/reference/compose-file/\" target=\"_blank\">Explore the Compose file reference</a></li><li><a class=\"link\" href=\"https://www.linkedin.com/learning/learning-docker-compose/\" rel=\"noopener\" target=\"_blank\">Check out the Learning Docker Compose video on LinkedIn Learning</a></li></ul></article>",
      "text": "Docker Compose Quickstart\nPage options\nCopy page as Markdown for LLMs\nView page as plain text\nAsk questions with Docs AI\nClaude\nOpen in Claude\nTable of contents\nThis tutorial aims to introduce fundamental concepts of Docker Compose by guiding you through the development of a basic Python web application.\nUsing the Flask framework, the application features a hit counter in Redis, providing a practical example of how Docker Compose can be applied in web development scenarios.\nThe concepts demonstrated here should be understandable even if you're not familiar with Python.\nThis is a non-normative example that demonstrates core Compose functionality.\nPrerequisites\nMake sure you have:\nInstalled the latest version of Docker Compose\nA basic understanding of Docker concepts and how Docker works\nStep 1: Set up\nCreate a directory for the project:\n$\nmkdir composetest\n$\ncd\ncomposetest\nCreate a file called\napp.py\nin your project directory and paste the following code in:\nimport\ntime\nimport\nredis\nfrom\nflask\nimport\nFlask\napp\n=\nFlask\n(\n__name__\n)\ncache\n=\nredis\n.\nRedis\n(\nhost\n=\n'redis'\n,\nport\n=\n6379\n)\ndef\nget_hit_count\n():\nretries\n=\n5\nwhile\nTrue\n:\ntry\n:\nreturn\ncache\n.\nincr\n(\n'hits'\n)\nexcept\nredis\n.\nexceptions\n.\nConnectionError\nas\nexc\n:\nif\nretries\n==\n0\n:\nraise\nexc\nretries\n-=\n1\ntime\n.\nsleep\n(\n0.5\n)\n@app.route\n(\n'/'\n)\ndef\nhello\n():\ncount\n=\nget_hit_count\n()\nreturn\nf\n'Hello World! I have been seen\n{\ncount\n}\ntimes.\n\\n\n'\nIn this example,\nredis\nis the hostname of the redis container on the\napplication's network and the default port,\n6379\nis used.\nNote\nNote the way the\nget_hit_count\nfunction is written. This basic retry\nloop attempts the request multiple times if the Redis service is\nnot available. This is useful at startup while the application comes\nonline, but also makes the application more resilient if the Redis\nservice needs to be restarted anytime during the app's lifetime. In a\ncluster, this also helps handling momentary connection drops between\nnodes.\nCreate another file called\nrequirements.txt\nin your project directory and\npaste the following code in:\nflask\nredis\nCreate a\nDockerfile\nand paste the following code in:\n# syntax=docker/dockerfile:1\nFROM\npython:3.10-alpine\nWORKDIR\n/code\nENV\nFLASK_APP\n=\napp.py\nENV\nFLASK_RUN_HOST\n=\n0\n.0.0.0\nRUN\napk add --no-cache gcc musl-dev linux-headers\nCOPY\nrequirements.txt requirements.txt\nRUN\npip install -r requirements.txt\nEXPOSE\n5000\nCOPY\n. .\nCMD\n[\n\"flask\"\n,\n\"run\"\n,\n\"--debug\"\n]\nUnderstand the Dockerfile\nThis tells Docker to:\nBuild an image starting with the Python 3.10 image.\nSet the working directory to\n/code\n.\nSet environment variables used by the\nflask\ncommand.\nInstall gcc and other dependencies\nCopy\nrequirements.txt\nand install the Python dependencies.\nAdd metadata to the image to describe that the container is listening on port 5000\nCopy the current directory\n.\nin the project to the workdir\n.\nin the image.\nSet the default command for the container to\nflask run --debug\n.\nImportant\nCheck that the\nDockerfile\nhas no file extension like\n.txt\n. Some editors may append this file extension automatically which results in an error when you run the application.\nFor more information on how to write Dockerfiles, see the\nDockerfile reference\n.\nStep 2: Define services in a Compose file\nCompose simplifies the control of your entire application stack, making it easy to manage services, networks, and volumes in a single, comprehensible YAML configuration file.\nCreate a file called\ncompose.yaml\nin your project directory and paste\nthe following:\nservices\n:\nweb\n:\nbuild\n:\n.\nports\n:\n-\n\"8000:5000\"\nredis\n:\nimage\n:\n\"redis:alpine\"\nThis Compose file defines two services:\nweb\nand\nredis\n.\nThe\nweb\nservice uses an image that's built from the\nDockerfile\nin the current directory.\nIt then binds the container and the host machine to the exposed port,\n8000\n. This example service uses the default port for the Flask web server,\n5000\n.\nThe\nredis\nservice uses a public\nRedis\nimage pulled from the Docker Hub registry.\nFor more information on the\ncompose.yaml\nfile, see\nHow Compose works\n.\nStep 3: Build and run your app with Compose\nWith a single command, you create and start all the services from your configuration file.\nFrom your project directory, start up your application by running\ndocker compose up\n.\n$\ndocker compose up\nCreating network \"composetest_default\" with the default driver\nCreating composetest_web_1 ...\nCreating composetest_redis_1 ...\nCreating composetest_web_1\nCreating composetest_redis_1 ... done\nAttaching to composetest_web_1, composetest_redis_1\nweb_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\nredis_1  | 1:C 17 Aug 22:11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\nredis_1  | 1:C 17 Aug 22:11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started\nredis_1  | 1:C 17 Aug 22:11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\nweb_1    |  * Restarting with stat\nredis_1  | 1:M 17 Aug 22:11:10.483 * Running mode=standalone, port=6379.\nredis_1  | 1:M 17 Aug 22:11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\nweb_1    |  * Debugger is active!\nredis_1  | 1:M 17 Aug 22:11:10.483 # Server initialized\nredis_1  | 1:M 17 Aug 22:11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\nweb_1    |  * Debugger PIN: 330-787-903\nredis_1  | 1:M 17 Aug 22:11:10.483 * Ready to accept connections\nCompose pulls a Redis image, builds an image for your code, and starts the\nservices you defined. In this case, the code is statically copied into the image at build time.\nEnter\nhttp://localhost:8000/\nin a browser to see the application running.\nIf this doesn't resolve, you can also try\nhttp://127.0.0.1:8000\n.\nYou should see a message in your browser saying:\nHello World! I have been seen 1 times.\nRefresh the page.\nThe number should increment.\nHello World! I have been seen 2 times.\nSwitch to another terminal window, and type\ndocker image ls\nto list local images.\nListing images at this point should return\nredis\nand\nweb\n.\n$\ndocker image ls\nREPOSITORY        TAG           IMAGE ID      CREATED        SIZE\ncomposetest_web   latest        e2c21aa48cc1  4 minutes ago  93.8MB\npython            3.4-alpine    84e6077c7ab6  7 days ago     82.5MB\nredis             alpine        9d8fa9aa0e5b  3 weeks ago    27.5MB\nYou can inspect images with\ndocker inspect <tag or id>\n.\nStop the application, either by running\ndocker compose down\nfrom within your project directory in the second terminal, or by\nhitting\nCTRL+C\nin the original terminal where you started the app.\nStep 4: Edit the Compose file to use Compose Watch\nEdit the\ncompose.yaml\nfile in your project directory to use\nwatch\nso you can preview your running Compose services which are automatically updated as you edit and save your code:\nservices\n:\nweb\n:\nbuild\n:\n.\nports\n:\n-\n\"8000:5000\"\ndevelop\n:\nwatch\n:\n-\naction\n:\nsync\npath\n:\n.\ntarget\n:\n/code\nredis\n:\nimage\n:\n\"redis:alpine\"\nWhenever a file is changed, Compose syncs the file to the corresponding location under\n/code\ninside the container. Once copied, the bundler updates the running application without a restart.\nFor more information on how Compose Watch works, see\nUse Compose Watch\n. Alternatively, see\nManage data in containers\nfor other options.\nNote\nFor this example to work, the\n--debug\noption is added to the\nDockerfile\n. The\n--debug\noption in Flask enables automatic code reload, making it possible to work on the backend API without the need to restart or rebuild the container.\nAfter changing the\n.py\nfile, subsequent API calls will use the new code, but the browser UI will not automatically refresh in this small example. Most frontend development servers include native live reload support that works with Compose.\nStep 5: Re-build and run the app with Compose\nFrom your project directory, type\ndocker compose watch\nor\ndocker compose up --watch\nto build and launch the app and start the file watch mode.\n$\ndocker compose watch\n[+] Running 2/2\n Container docs-redis-1 Created                                                                                                                                                                                                        0.0s\n Container docs-web-1    Recreated                                                                                                                                                                                                      0.1s\nAttaching to redis-1, web-1\n watch enabled\n...\nCheck the\nHello World\nmessage in a web browser again, and refresh to see the\ncount increment.\nStep 6: Update the application\nTo see Compose Watch in action:\nChange the greeting in\napp.py\nand save it. For example, change the\nHello World!\nmessage to\nHello from Docker!\n:\nreturn\nf\n'Hello from Docker! I have been seen\n{\ncount\n}\ntimes.\n\\n\n'\nRefresh the app in your browser. The greeting should be updated, and the\ncounter should still be incrementing.\nOnce you're done, run\ndocker compose down\n.\nStep 7: Split up your services\nUsing multiple Compose files lets you customize a Compose application for different environments or workflows. This is useful for large applications that may use dozens of containers, with ownership distributed across multiple teams.\nIn your project folder, create a new Compose file called\ninfra.yaml\n.\nCut the Redis service from your\ncompose.yaml\nfile and paste it into your new\ninfra.yaml\nfile. Make sure you add the\nservices\ntop-level attribute at the top of your file. Your\ninfra.yaml\nfile should now look like this:\nservices\n:\nredis\n:\nimage\n:\n\"redis:alpine\"\nIn your\ncompose.yaml\nfile, add the\ninclude\ntop-level attribute along with the path to the\ninfra.yaml\nfile.\ninclude\n:\n-\ninfra.yaml\nservices\n:\nweb\n:\nbuild\n:\n.\nports\n:\n-\n\"8000:5000\"\ndevelop\n:\nwatch\n:\n-\naction\n:\nsync\npath\n:\n.\ntarget\n:\n/code\nRun\ndocker compose up\nto build the app with the updated Compose files, and run it. You should see the\nHello world\nmessage in your browser.\nThis is a simplified example, but it demonstrates the basic principle of\ninclude\nand how it can make it easier to modularize complex applications into sub-Compose files. For more information on\ninclude\nand working with multiple Compose files, see\nWorking with multiple Compose files\n.\nStep 8: Experiment with some other commands\nIf you want to run your services in the background, you can pass the\n-d\nflag (for \"detached\" mode) to\ndocker compose up\nand use\ndocker compose ps\nto see what is currently running:\n$\ndocker compose up -d\nStarting composetest_redis_1...\nStarting composetest_web_1...\n$\ndocker compose ps\nName                      Command               State           Ports\n-------------------------------------------------------------------------------------\ncomposetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp\ncomposetest_web_1     flask run                        Up      0.0.0.0:8000->5000/tcp\nRun\ndocker compose --help\nto see other available commands.\nIf you started Compose with\ndocker compose up -d\n, stop your services once you've finished with them:\n$\ndocker compose stop\nYou can bring everything down, removing the containers entirely, with the\ndocker compose down\ncommand.\nWhere to go next\nTry the\nSample apps with Compose\nExplore the full list of Compose commands\nExplore the Compose file reference\nCheck out the Learning Docker Compose video on LinkedIn Learning",
      "code_blocks": [
        {
          "lang": "console",
          "code": "$ mkdir composetest\n$ cd composetest\n"
        },
        {
          "lang": "python",
          "code": "import time\n\nimport redis\nfrom flask import Flask\n\napp = Flask(__name__)\ncache = redis.Redis(host='redis', port=6379)\n\ndef get_hit_count():\n    retries = 5\n    while True:\n        try:\n            return cache.incr('hits')\n        except redis.exceptions.ConnectionError as exc:\n            if retries == 0:\n                raise exc\n            retries -= 1\n            time.sleep(0.5)\n\n@app.route('/')\ndef hello():\n    count = get_hit_count()\n    return f'Hello World! I have been seen {count} times.\\n'"
        },
        {
          "lang": "text",
          "code": "flask\nredis"
        },
        {
          "lang": "dockerfile",
          "code": "# syntax=docker/dockerfile:1\nFROM python:3.10-alpine\nWORKDIR /code\nENV FLASK_APP=app.py\nENV FLASK_RUN_HOST=0.0.0.0\nRUN apk add --no-cache gcc musl-dev linux-headers\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nEXPOSE 5000\nCOPY . .\nCMD [\"flask\", \"run\", \"--debug\"]"
        },
        {
          "lang": "yaml",
          "code": "services:\n  web:\n    build: .\n    ports:\n      - \"8000:5000\"\n  redis:\n    image: \"redis:alpine\""
        },
        {
          "lang": "console",
          "code": "$ docker compose up\n\nCreating network \"composetest_default\" with the default driver\nCreating composetest_web_1 ...\nCreating composetest_redis_1 ...\nCreating composetest_web_1\nCreating composetest_redis_1 ... done\nAttaching to composetest_web_1, composetest_redis_1\nweb_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)\nredis_1  | 1:C 17 Aug 22:11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\nredis_1  | 1:C 17 Aug 22:11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started\nredis_1  | 1:C 17 Aug 22:11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\nweb_1    |  * Restarting with stat\nredis_1  | 1:M 17 Aug 22:11:10.483 * Running mode=standalone, port=6379.\nredis_1  | 1:M 17 Aug 22:11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\nweb_1    |  * Debugger is active!\nredis_1  | 1:M 17 Aug 22:11:10.483 # Server initialized\nredis_1  | 1:M 17 Aug 22:11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\nweb_1    |  * Debugger PIN: 330-787-903\nredis_1  | 1:M 17 Aug 22:11:10.483 * Ready to accept connections\n"
        },
        {
          "lang": "text",
          "code": "Hello World! I have been seen 1 times."
        },
        {
          "lang": "text",
          "code": "Hello World! I have been seen 2 times."
        },
        {
          "lang": "console",
          "code": "$ docker image ls\n\nREPOSITORY        TAG           IMAGE ID      CREATED        SIZE\ncomposetest_web   latest        e2c21aa48cc1  4 minutes ago  93.8MB\npython            3.4-alpine    84e6077c7ab6  7 days ago     82.5MB\nredis             alpine        9d8fa9aa0e5b  3 weeks ago    27.5MB\n"
        },
        {
          "lang": "yaml",
          "code": "services:\n  web:\n    build: .\n    ports:\n      - \"8000:5000\"\n    develop:\n      watch:\n        - action: sync\n          path: .\n          target: /code\n  redis:\n    image: \"redis:alpine\""
        },
        {
          "lang": "console",
          "code": "$ docker compose watch\n[+] Running 2/2\n  Container docs-redis-1 Created                                                                                                                                                                                                        0.0s\n  Container docs-web-1    Recreated                                                                                                                                                                                                      0.1s\nAttaching to redis-1, web-1\n          watch enabled\n...\n"
        },
        {
          "lang": "python",
          "code": "return f'Hello from Docker! I have been seen {count} times.\\n'"
        },
        {
          "lang": "yaml",
          "code": "services:\n  redis:\n    image: \"redis:alpine\""
        },
        {
          "lang": "yaml",
          "code": "include:\n   - infra.yaml\nservices:\n  web:\n    build: .\n    ports:\n      - \"8000:5000\"\n    develop:\n      watch:\n        - action: sync\n          path: .\n          target: /code"
        },
        {
          "lang": "console",
          "code": "$ docker compose up -d\n\nStarting composetest_redis_1...\nStarting composetest_web_1...\n\n$ docker compose ps\n\n       Name                      Command               State           Ports         \n-------------------------------------------------------------------------------------\ncomposetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp              \ncomposetest_web_1     flask run                        Up      0.0.0.0:8000->5000/tcp\n"
        },
        {
          "lang": "console",
          "code": "$ docker compose stop\n"
        }
      ],
      "headings": [
        {
          "level": 1,
          "text": "Docker Compose Quickstart"
        },
        {
          "level": 2,
          "text": "Prerequisites"
        },
        {
          "level": 2,
          "text": "Step 1: Set up"
        },
        {
          "level": 2,
          "text": "Step 2: Define services in a Compose file"
        },
        {
          "level": 2,
          "text": "Step 3: Build and run your app with Compose"
        },
        {
          "level": 2,
          "text": "Step 4: Edit the Compose file to use Compose Watch"
        },
        {
          "level": 2,
          "text": "Step 5: Re-build and run the app with Compose"
        },
        {
          "level": 2,
          "text": "Step 6: Update the application"
        },
        {
          "level": 2,
          "text": "Step 7: Split up your services"
        },
        {
          "level": 2,
          "text": "Step 8: Experiment with some other commands"
        },
        {
          "level": 2,
          "text": "Where to go next"
        }
      ]
    }
  ]
}